"use strict";(self.webpackChunkemployeeSystem=self.webpackChunkemployeeSystem||[]).push([[543],{543:(Y,g,r)=>{r.r(g),r.d(g,{GetEmployeesModule:()=>V});var p=r(177),m=r(4341),u=r(303),_=r(1413),v=r(8359);class C extends v.yU{constructor(s,t){super()}schedule(s,t=0){return this}}const h={setInterval(i,s,...t){const{delegate:n}=h;return n?.setInterval?n.setInterval(i,s,...t):setInterval(i,s,...t)},clearInterval(i){const{delegate:s}=h;return(s?.clearInterval||clearInterval)(i)},delegate:void 0};var x=r(7908);const f={now:()=>(f.delegate||Date).now(),delegate:void 0};class d{constructor(s,t=d.now){this.schedulerActionCtor=s,this.now=t}schedule(s,t=0,n){return new this.schedulerActionCtor(this,s).schedule(n,t)}}d.now=f.now;const k=new class P extends d{constructor(s,t=d.now){super(s,t),this.actions=[],this._active=!1}flush(s){const{actions:t}=this;if(this._active)return void t.push(s);let n;this._active=!0;do{if(n=s.execute(s.state,s.delay))break}while(s=t.shift());if(this._active=!1,n){for(;s=t.shift();)s.unsubscribe();throw n}}}(class E extends C{constructor(s,t){super(s,t),this.scheduler=s,this.work=t,this.pending=!1}schedule(s,t=0){var n;if(this.closed)return this;this.state=s;const o=this.id,l=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(l,o,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(l,this.id,t),this}requestAsyncId(s,t,n=0){return h.setInterval(s.flush.bind(s,this),n)}recycleAsyncId(s,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&h.clearInterval(t)}execute(s,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(s,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,t){let o,n=!1;try{this.work(s)}catch(l){n=!0,o=l||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:s,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,x.o)(n,this),null!=s&&(this.id=this.recycleAsyncId(t,s,null)),this.delay=null,super.unsubscribe()}}});var M=r(9974),w=r(4360),O=r(3294),e=r(6276),j=r(3853);let I=(()=>{class i{constructor(){this.confirm=new e.bkB,this.cancel=new e.bkB}onConfirm(){this.confirm.emit()}onCancel(){this.cancel.emit()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-modal"]],outputs:{confirm:"confirm",cancel:"cancel"},decls:15,vars:0,consts:[["tabindex","-1",1,"modal","fade","show","d-block",2,"background","rgba(0,0,0,0.5)"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5",4),e.EFF(5,"Confirm Deletion"),e.k0s(),e.j41(6,"button",5),e.bIt("click",function(){return o.onCancel()}),e.k0s()(),e.j41(7,"div",6)(8,"p"),e.EFF(9,"Are you sure you want to delete this employee?"),e.k0s()(),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return o.onCancel()}),e.EFF(12,"Cancel"),e.k0s(),e.j41(13,"button",9),e.bIt("click",function(){return o.onConfirm()}),e.EFF(14,"Confirm"),e.k0s()()()()())},styles:[".modal[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:400px}.modal[_ngcontent-%COMP%]   .modal-content[_ngcontent-%COMP%]{border-radius:8px}.modal[_ngcontent-%COMP%]   .modal-header[_ngcontent-%COMP%]{border-bottom:none}.modal[_ngcontent-%COMP%]   .modal-footer[_ngcontent-%COMP%]{border-top:none}"]})}}return i})();function G(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",16),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.resetSearch())}),e.EFF(1,"Clear"),e.k0s()}}function S(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",34)(1,"p",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,l=e.XpG();return e.Njj(l.viewEmployeeDetails(o.id))}),e.EFF(2,"View Employee"),e.k0s(),e.j41(3,"p",35),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,l=e.XpG();return e.Njj(l.openDeleteModal(o))}),e.EFF(4,"Delete Employee"),e.k0s()()}}const T=function(i){return{online:i}};function R(i,s){if(1&i){const t=e.RV6();e.j41(0,"div",17)(1,"div",18)(2,"div",19),e.nrm(3,"img",20),e.j41(4,"div")(5,"h6",21),e.EFF(6),e.k0s(),e.j41(7,"small",22),e.EFF(8),e.k0s()(),e.nrm(9,"span",23),e.k0s(),e.j41(10,"div",24)(11,"div",25)(12,"div")(13,"div",26),e.EFF(14,"Department"),e.k0s(),e.j41(15,"div"),e.EFF(16),e.k0s()()(),e.j41(17,"div",27)(18,"span",28),e.nrm(19,"i",29),e.k0s(),e.j41(20,"div"),e.EFF(21),e.k0s()(),e.j41(22,"div",30)(23,"span",28),e.nrm(24,"i",31),e.k0s(),e.j41(25,"div"),e.EFF(26),e.k0s()()(),e.j41(27,"div",32),e.bIt("click",function(){const l=e.eBV(t).index,c=e.XpG();return e.Njj(c.toggleDiv(l))}),e.j41(28,"span"),e.EFF(29,"\u22ef"),e.k0s()(),e.DNE(30,S,5,0,"div",33),e.k0s()()}if(2&i){const t=s.$implicit,n=s.index,o=e.XpG();e.R7$(3),e.Y8G("src",t.image,e.B4B),e.R7$(3),e.Lme("",t.firstName," ",t.lastName,""),e.R7$(2),e.JRh(null==t.company?null:t.company.title),e.R7$(1),e.Y8G("ngClass",e.eq3(9,T,"online"===t.status)),e.R7$(7),e.JRh(null==t.company?null:t.company.department),e.R7$(5),e.JRh(t.email),e.R7$(5),e.JRh(t.phone),e.R7$(4),e.Y8G("ngIf",o.visibleCardIndex===n)}}const D=function(i,s){return{"btn-orange":i,"btn-outline-secondary":s}};function $(i,s){if(1&i){const t=e.RV6();e.j41(0,"button",36),e.bIt("click",function(){const l=e.eBV(t).$implicit,c=e.XpG();return e.Njj(c.goToPage(l))}),e.EFF(1),e.k0s()}if(2&i){const t=s.$implicit,n=e.XpG();e.Y8G("ngClass",e.l_i(2,D,n.currentPage===t,n.currentPage!==t)),e.R7$(1),e.JRh(t)}}function N(i,s){if(1&i){const t=e.RV6();e.j41(0,"app-modal",37),e.bIt("confirm",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.confirmDelete())})("cancel",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.closeModal())}),e.k0s()}}const A=[{path:"",component:(()=>{class i{constructor(t,n){this.employeeService=t,this.router=n,this.employees=[],this.totalEmployees=0,this.pageSize=10,this.currentPage=1,this.totalPages=0,this.pageNumbers=[],this.maxEmployees=30,this.visibleCardIndex=null,this.showModal=!1,this.employeeToDelete=null,this.searchQuery="",this.isSearching=!1,this.searchSubject=new _.B,this.searchSubscription=null}ngOnInit(){this.setupSearch(),this.fetchEmployees()}ngOnDestroy(){this.searchSubscription&&this.searchSubscription.unsubscribe()}setupSearch(){this.searchSubscription=this.searchSubject.pipe(function F(i,s=k){return(0,M.N)((t,n)=>{let o=null,l=null,c=null;const b=()=>{if(o){o.unsubscribe(),o=null;const a=l;l=null,n.next(a)}};function B(){const a=c+i,y=s.now();if(y<a)return o=this.schedule(void 0,a-y),void n.add(o);b()}t.subscribe((0,w._)(n,a=>{l=a,c=s.now(),o||(o=s.schedule(B,i),n.add(o))},()=>{b(),n.complete()},void 0,()=>{l=o=null}))})}(300),(0,O.F)()).subscribe(t=>{0===t.trim().length?this.resetSearch():this.performSearch(t)})}onSearchInput(t){this.searchQuery=t,this.searchSubject.next(t)}performSearch(t){this.isSearching=!0,this.employeeService.searchEmployees(t).subscribe({next:n=>{this.employees=n.users,this.totalEmployees=this.employees.length,this.totalPages=1,this.pageNumbers=[1]},error:n=>{console.error("Search failed:",n),this.employees=[],this.totalEmployees=0,this.totalPages=0}})}fetchEmployees(){this.employeeService.getEmployeesWithPagination(this.pageSize,(this.currentPage-1)*this.pageSize).subscribe({next:n=>{this.employees=[...this.employees,...n.users],this.totalEmployees=Math.min(n.total,this.maxEmployees),this.totalPages=Math.ceil(this.totalEmployees/this.pageSize),this.pageNumbers=Array.from({length:this.totalPages},(o,l)=>l+1),this.employees.length>=this.maxEmployees&&(this.employees=this.employees.slice(0,this.maxEmployees),this.totalPages=Math.ceil(this.employees.length/this.pageSize),this.pageNumbers=Array.from({length:this.totalPages},(o,l)=>l+1))},error:n=>{console.error("Failed to fetch employees:",n)}})}goToPage(t){t!==this.currentPage&&this.employees.length<this.maxEmployees&&(this.currentPage=t,this.fetchEmployees())}previousPage(){this.currentPage>1&&(this.currentPage--,this.fetchEmployees())}nextPage(){this.currentPage<this.totalPages&&this.employees.length<this.maxEmployees&&(this.currentPage++,this.fetchEmployees())}toggleDiv(t){this.visibleCardIndex=this.visibleCardIndex===t?null:t}openDeleteModal(t){this.employeeToDelete=t,this.showModal=!0,this.visibleCardIndex=null}confirmDelete(){this.employeeToDelete&&this.employeeService.deleteEmployee(this.employeeToDelete.id).subscribe({next:()=>{this.employees=this.employees.filter(t=>t.id!==this.employeeToDelete.id),this.totalEmployees=Math.min(this.totalEmployees-1,this.maxEmployees),this.closeModal(),console.log("employee deleted")},error:t=>{console.error("Failed to delete employee:",t),this.closeModal()}})}closeModal(){this.showModal=!1,this.employeeToDelete=null}viewEmployeeDetails(t){this.router.navigate(["/employees/employee",t])}navigateToAddEmployee(){this.router.navigate(["/employees/add-employee"])}resetSearch(){this.isSearching=!1,this.searchQuery="",this.currentPage=1,this.employees=[],this.fetchEmployees()}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(j.r),e.rXU(u.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-get-employees"]],decls:24,vars:8,consts:[[1,"container","py-4"],[1,"d-flex","justify-content-between","align-items-center","mb-5","mt-3"],[1,"text-orange"],[1,"search-box"],["type","text","placeholder","Search by name",1,"searchInput",3,"ngModel","ngModelChange","input"],[1,"search-btn",3,"click"],[1,"fa-solid","fa-magnifying-glass"],["class","btn btn-sm btn-outline-danger ms-2",3,"click",4,"ngIf"],[1,"btn","btn-orange",3,"click"],[1,"row"],["class","col-md-4 mb-4",4,"ngFor","ngForOf"],[1,"pagination","d-flex","justify-content-center","align-items-center","mt-4"],[1,"btn","btn-outline-secondary","me-2",3,"disabled","click"],["class","btn mx-1",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary","ms-2",3,"disabled","click"],[3,"confirm","cancel",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger","ms-2",3,"click"],[1,"col-md-4","mb-4"],[1,"card","shadow-sm","rounded-4","border-0","p-3","position-relative","h-100"],[1,"d-flex","align-items-center","mb-3"],["width","60","height","60","alt","Employee photo",1,"rounded-circle","me-3",3,"src"],[1,"mb-0","fw-bold","text-uppercase"],[1,"text-muted"],[1,"status-dot","position-absolute",3,"ngClass"],[1,"border-top","pt-2"],[1,"d-flex","justify-content-between","mb-2"],[1,"label"],[1,"d-flex","align-items-center","mb-1"],[1,"icon","me-2"],[1,"fa-solid","fa-envelope"],[1,"d-flex","align-items-center"],[1,"fa-solid","fa-phone"],[1,"dots","position-absolute","top-0","end-0","p-2",3,"click"],["class","custom-dropdown position-absolute",4,"ngIf"],[1,"custom-dropdown","position-absolute"],[1,"dropdown-item",3,"click"],[1,"btn","mx-1",3,"ngClass","click"],[3,"confirm","cancel"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"h3")(3,"span",2),e.EFF(4),e.k0s(),e.EFF(5," Employees"),e.k0s(),e.j41(6,"div")(7,"div",3)(8,"input",4),e.bIt("ngModelChange",function(c){return o.searchQuery=c})("input",function(){return o.onSearchInput(o.searchQuery)}),e.k0s(),e.j41(9,"button",5),e.bIt("click",function(){return o.onSearchInput(o.searchQuery)}),e.nrm(10,"i",6),e.k0s(),e.DNE(11,G,2,0,"button",7),e.k0s()(),e.j41(12,"div")(13,"button",8),e.bIt("click",function(){return o.navigateToAddEmployee()}),e.EFF(14,"+Add Employee"),e.k0s()()(),e.j41(15,"div",9),e.DNE(16,R,31,11,"div",10),e.k0s(),e.j41(17,"div",11)(18,"button",12),e.bIt("click",function(){return o.previousPage()}),e.EFF(19,"Previous"),e.k0s(),e.DNE(20,$,2,5,"button",13),e.j41(21,"button",14),e.bIt("click",function(){return o.nextPage()}),e.EFF(22,"Next"),e.k0s()(),e.DNE(23,N,1,0,"app-modal",15),e.k0s()),2&n&&(e.R7$(4),e.JRh(o.totalEmployees),e.R7$(4),e.Y8G("ngModel",o.searchQuery),e.R7$(3),e.Y8G("ngIf",o.isSearching),e.R7$(5),e.Y8G("ngForOf",o.employees),e.R7$(2),e.Y8G("disabled",1===o.currentPage),e.R7$(2),e.Y8G("ngForOf",o.pageNumbers),e.R7$(1),e.Y8G("disabled",o.currentPage===o.totalPages),e.R7$(2),e.Y8G("ngIf",o.showModal))},dependencies:[p.YU,p.Sq,p.bT,m.me,m.BC,m.vS,I],styles:[".container[_ngcontent-%COMP%]{max-width:1200px}h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.text-orange[_ngcontent-%COMP%]{color:#f28c38;font-size:2rem}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#d3d3d3;color:#6c757d;font-size:.9rem;padding:.5rem 1rem;border-radius:8px}.btn-orange[_ngcontent-%COMP%]{background-color:#f28c38;color:#fff;font-size:.9rem;padding:.5rem 1rem;border-radius:8px;border:none}.card[_ngcontent-%COMP%]{background-color:#f5f5f5;box-shadow:0 4px 10px #0000001a;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.rounded-4[_ngcontent-%COMP%]{border-radius:1rem!important}img.rounded-circle[_ngcontent-%COMP%]{object-fit:cover;border:2px solid #e0e0e0}h6[_ngcontent-%COMP%]{font-size:1rem;color:#333}.text-muted[_ngcontent-%COMP%]{font-size:.85rem;color:#888}.border-top[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0}.label[_ngcontent-%COMP%]{font-size:.85rem;color:#888;font-weight:500}.icon[_ngcontent-%COMP%]{font-size:1rem;color:#888}.dots[_ngcontent-%COMP%]{font-size:1.2rem;color:#888;cursor:pointer}.status-dot[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:50%;top:50px;left:50px;border:2px solid #fff}.status-dot.online[_ngcontent-%COMP%]{background-color:#28a745}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{min-width:40px;text-align:center}.pagination[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.custom-dropdown[_ngcontent-%COMP%]{top:-80px;right:0;background-color:#fff;border:1px solid #ddd;padding:10px;border-radius:8px;box-shadow:0 4px 12px #00000026;z-index:10;width:200px}.custom-dropdown[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:8px 12px;transition:background-color .2s ease;cursor:pointer;border-radius:4px}.custom-dropdown[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{background-color:#f28c38}.dropdown-item[_ngcontent-%COMP%]:hover{color:#fff}.search-box[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:4em;position:relative}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:15px;margin-right:10px;width:400px;height:48px;padding:5px 10px 5px 3em}.searchInput[_ngcontent-%COMP%]{border:2px solid #ccc;padding:8px;font-size:16px;border:none;outline:none}input[_ngcontent-%COMP%]:focus{border-color:#f28c3800;box-shadow:0 0 8px #f28c38!important;outline:none}input[_ngcontent-%COMP%]::placeholder{font-weight:400;font-size:14px;color:#d3d3d3}.search-btn[_ngcontent-%COMP%]{background-color:#f28c38;color:#fff;border:none;border-radius:4px;position:absolute;top:50%;left:10px;transform:translateY(-50%)}@media (max-width: 768px){.d-flex[_ngcontent-%COMP%]{display:flex;flex-direction:column}.container[_ngcontent-%COMP%]{overflow-x:hidden}.pagination[_ngcontent-%COMP%]{display:flex;flex-direction:row}.search-box[_ngcontent-%COMP%]{margin-bottom:15px;width:75%}}"]})}}return i})()}];let z=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[u.iI.forChild(A),u.iI]})}}return i})(),V=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[p.MD,z,m.YN]})}}return i})()}}]);